{
  "info": {
    "name": "Museo 3D - API Completa v2.0",
    "description": "Colecci√≥n completa y actualizada de endpoints para el Museo Virtual 3D. Incluye gesti√≥n de murales, salas, usuarios y funcionalidades avanzadas con ejemplos de respuesta detallados.",
    "version": "2.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:3001",
      "type": "string",
      "description": "URL base del servidor de desarrollo"
    },
    {
      "key": "production_url",
      "value": "https://museo-3d.vercel.app",
      "type": "string",
      "description": "URL de producci√≥n (cuando est√© disponible)"
    },
    {
      "key": "api_version",
      "value": "v1",
      "type": "string",
      "description": "Versi√≥n del API"
    }
  ],
  "item": [
    {
      "name": "üé® Murales",
      "description": "Endpoints para gestionar murales del museo",
      "item": [
        {
          "name": "üìã Obtener todos los murales",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response has murales array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('murales');",
                  "    pm.expect(jsonData.murales).to.be.an('array');",
                  "});",
                  "",
                  "pm.test(\"Response has estadisticas\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('estadisticas');",
                  "    pm.expect(jsonData.estadisticas).to.have.property('total');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/murales",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "murales"
              ]
            },
            "description": "Obtiene todos los murales con informaci√≥n de salas y estad√≠sticas completas. Incluye relaciones con salas y m√©tricas autom√°ticas."
          },
          "response": [
            {
              "name": "‚úÖ √âxito - Lista completa",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/murales",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "murales"
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json; charset=utf-8"
                }
              ],
              "body": "{\\n  \\\"murales\\\": [\\n    {\\n      \\\"id\\\": 1,\\n      \\\"nombre\\\": \\\"Saturnino-Moon\\\",\\n      \\\"tecnica\\\": \\\"Acr√≠lico sobre muro\\\",\\n      \\\"anio\\\": 2024,\\n      \\\"ubicacion\\\": \\\"Pared Este\\\",\\n      \\\"url_imagen\\\": \\\"https://res.cloudinary.com/museo3d/image/upload/v1234567890/murales/saturnino-moon.jpg\\\",\\n      \\\"autor\\\": \\\"Miguel Fernando Lima Rodr√≠guez\\\",\\n      \\\"colaboradores\\\": \\\"Pamela S√°nchez Hern√°ndez\\\",\\n      \\\"medidas\\\": \\\"2.46 x 3.8m\\\",\\n      \\\"salaId\\\": 4,\\n      \\\"createdAt\\\": \\\"2024-01-15T10:30:00.000Z\\\",\\n      \\\"updatedAt\\\": \\\"2024-01-15T10:30:00.000Z\\\",\\n      \\\"sala\\\": {\\n        \\\"id\\\": 4,\\n        \\\"nombre\\\": \\\"Sala ARPA\\\",\\n        \\\"descripcion\\\": \\\"Murales del programa ARPA\\\"\\n      }\\n    },\\n    {\\n      \\\"id\\\": 2,\\n      \\\"nombre\\\": \\\"Metamorfosis Marina\\\",\\n      \\\"tecnica\\\": \\\"Pintura vin√≠lica sobre muro\\\",\\n      \\\"anio\\\": 2024,\\n      \\\"ubicacion\\\": \\\"Pared Oeste\\\",\\n      \\\"url_imagen\\\": \\\"https://res.cloudinary.com/museo3d/image/upload/v1234567890/murales/metamorfosis-marina.jpg\\\",\\n      \\\"autor\\\": \\\"Vanessa Flores 'Flores en el Mar'\\\",\\n      \\\"colaboradores\\\": null,\\n      \\\"medidas\\\": \\\"5m x 4.30m\\\",\\n      \\\"salaId\\\": 4,\\n      \\\"createdAt\\\": \\\"2024-02-20T14:15:00.000Z\\\",\\n      \\\"updatedAt\\\": \\\"2024-02-20T14:15:00.000Z\\\",\\n      \\\"sala\\\": {\\n        \\\"id\\\": 4,\\n        \\\"nombre\\\": \\\"Sala ARPA\\\",\\n        \\\"descripcion\\\": \\\"Murales del programa ARPA\\\"\\n      }\\n    }\\n  ],\\n  \\\"estadisticas\\\": {\\n    \\\"total\\\": 2,\\n    \\\"porSala\\\": {\\n      \\\"Sala ARPA\\\": 2\\n    },\\n    \\\"porTecnica\\\": {\\n      \\\"Acr√≠lico sobre muro\\\": 1,\\n      \\\"Pintura vin√≠lica sobre muro\\\": 1\\n    },\\n    \\\"porAnio\\\": {\\n      \\\"2024\\\": 2\\n    }\\n  },\\n  \\\"filtros\\\": {\\n    \\\"salaId\\\": null,\\n    \\\"autor\\\": null,\\n    \\\"tecnica\\\": null,\\n    \\\"anio\\\": null\\n  }\\n}"
            }
          ]
        },
        {
          "name": "üîç Filtrar murales por sala",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Filtered by sala\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.filtros.salaId).to.not.be.null;",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/murales?salaId=4",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "murales"
              ],
              "query": [
                {
                  "key": "salaId",
                  "value": "4",
                  "description": "ID de la Sala ARPA"
                }
              ]
            },
            "description": "Filtra murales por sala espec√≠fica. √ötil para obtener murales de una galer√≠a particular."
          },
          "response": []
        },
        {
          "name": "üë§ Buscar murales por autor",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/murales?autor=Rodriguez",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "murales"
              ],
              "query": [
                {
                  "key": "autor",
                  "value": "Rodriguez",
                  "description": "B√∫squeda parcial e insensible a may√∫sculas"
                }
              ]
            },
            "description": "Busca murales por nombre del autor usando b√∫squeda parcial e insensible a may√∫sculas y min√∫sculas."
          },
          "response": []
        },
        {
          "name": "üé® Filtrar por t√©cnica art√≠stica",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/murales?tecnica=acr√≠lico",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "murales"
              ],
              "query": [
                {
                  "key": "tecnica",
                  "value": "acr√≠lico",
                  "description": "T√©cnica: acr√≠lico, √≥leo, spray, etc."
                }
              ]
            },
            "description": "Filtra murales por t√©cnica art√≠stica utilizada (acr√≠lico, √≥leo, spray, mixta, etc.)"
          },
          "response": []
        },
        {
          "name": "üìÖ Filtrar por a√±o de creaci√≥n",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/murales?anio=2024",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "murales"
              ],
              "query": [
                {
                  "key": "anio",
                  "value": "2024",
                  "description": "A√±o de creaci√≥n del mural"
                }
              ]
            },
            "description": "Filtra murales por a√±o espec√≠fico de creaci√≥n"
          },
          "response": []
        },
        {
          "name": "üîß Filtros combinados (Avanzado)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/murales?salaId=4&anio=2024&tecnica=acr√≠lico&autor=Miguel",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "murales"
              ],
              "query": [
                {
                  "key": "salaId",
                  "value": "4",
                  "description": "Sala ARPA"
                },
                {
                  "key": "anio",
                  "value": "2024",
                  "description": "A√±o 2024"
                },
                {
                  "key": "tecnica",
                  "value": "acr√≠lico",
                  "description": "T√©cnica acr√≠lica"
                },
                {
                  "key": "autor",
                  "value": "Miguel",
                  "description": "Autor que contenga 'Miguel'"
                }
              ]
            },
            "description": "Ejemplo de b√∫squeda avanzada combinando m√∫ltiples filtros para encontrar murales espec√≠ficos"
          },
          "response": []
        },
        {
          "name": "‚ûï Crear mural (JSON)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Mural created with ID\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData.id).to.be.a('number');",
                  "    ",
                  "    // Guardar ID para otros tests",
                  "    pm.environment.set('created_mural_id', jsonData.id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\\n  \\\"nombre\\\": \\\"Mural de Prueba API\\\",\\n  \\\"tecnica\\\": \\\"Acr√≠lico sobre muro\\\",\\n  \\\"anio\\\": 2024,\\n  \\\"ubicacion\\\": \\\"Pared Norte - Zona de Pruebas\\\",\\n  \\\"url_imagen\\\": \\\"https://via.placeholder.com/800x600/007bff/ffffff?text=Mural+API+Test\\\",\\n  \\\"autor\\\": \\\"Desarrollador Test\\\",\\n  \\\"colaboradores\\\": \\\"Equipo de QA, DevOps Team\\\",\\n  \\\"medidas\\\": \\\"3m x 2m\\\",\\n  \\\"salaId\\\": 1\\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/api/murales",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "murales"
              ]
            },
            "description": "Crea un nuevo mural enviando datos en formato JSON. Todos los campos son opcionales excepto: nombre, tecnica, anio, ubicacion y url_imagen."
          },
          "response": []
        },
        {
          "name": "üì§ Crear mural con imagen (Form Data)",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "nombre",
                  "value": "Mural Subido con Imagen",
                  "type": "text",
                  "description": "Nombre del mural"
                },
                {
                  "key": "tecnica",
                  "value": "Spray y acr√≠lico sobre muro",
                  "type": "text",
                  "description": "T√©cnica utilizada"
                },
                {
                  "key": "anio",
                  "value": "2024",
                  "type": "text",
                  "description": "A√±o de creaci√≥n"
                },
                {
                  "key": "ubicacion",
                  "value": "Pared Sur - Entrada Principal",
                  "type": "text",
                  "description": "Ubicaci√≥n f√≠sica"
                },
                {
                  "key": "autor",
                  "value": "Artista Digital Upload",
                  "type": "text",
                  "description": "Autor principal"
                },
                {
                  "key": "colaboradores",
                  "value": "Estudiantes de Arte, Comunidad Local",
                  "type": "text",
                  "description": "Colaboradores (opcional)"
                },
                {
                  "key": "medidas",
                  "value": "4m x 3.5m",
                  "type": "text",
                  "description": "Dimensiones (opcional)"
                },
                {
                  "key": "salaId",
                  "value": "2",
                  "type": "text",
                  "description": "ID de la sala (opcional)"
                },
                {
                  "key": "imagen",
                  "type": "file",
                  "description": "Archivo de imagen (JPG, PNG, WebP) - Se subir√° autom√°ticamente a Cloudinary"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/api/murales",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "murales"
              ]
            },
            "description": "Crea un nuevo mural subiendo una imagen como archivo. La imagen se sube autom√°ticamente a Cloudinary y se obtiene la URL."
          },
          "response": []
        },
        {
          "name": "üîç Obtener mural por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/murales/{{created_mural_id}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "murales",
                "{{created_mural_id}}"
              ]
            },
            "description": "Obtiene un mural espec√≠fico por su ID. Incluye toda la informaci√≥n detallada y la relaci√≥n con la sala."
          },
          "response": []
        }
      ]
    },
    {
      "name": "üèõÔ∏è Salas",
      "description": "Endpoints para gestionar salas del museo",
      "item": [
        {
          "name": "üìã Obtener todas las salas",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is array\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/salas",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "salas"
              ]
            },
            "description": "Obtiene todas las salas disponibles en el museo con su informaci√≥n b√°sica"
          },
          "response": []
        },
        {
          "name": "üé≠ Obtener murales de una sala",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/salas/4/murales",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "salas",
                "4",
                "murales"
              ]
            },
            "description": "Obtiene todos los murales de una sala espec√≠fica (ejemplo: Sala ARPA con ID 4)"
          },
          "response": []
        },
        {
          "name": "üîç Obtener sala por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/salas/4",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "salas",
                "4"
              ]
            },
            "description": "Obtiene informaci√≥n detallada de una sala espec√≠fica"
          },
          "response": []
        },
        {
          "name": "üë• Obtener colaboradores de una sala",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/salas/4/colaboradores",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "salas",
                "4",
                "colaboradores"
              ]
            },
            "description": "Obtiene la lista de colaboradores asociados a una sala espec√≠fica"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üë• Usuarios",
      "description": "Endpoints para gestionar usuarios del sistema",
      "item": [
        {
          "name": "üìã Obtener todos los usuarios",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/usuarios",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "usuarios"
              ]
            },
            "description": "Obtiene todos los usuarios registrados en el sistema"
          },
          "response": []
        },
        {
          "name": "üîç Obtener usuario por ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/usuarios/1",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "usuarios",
                "1"
              ]
            },
            "description": "Obtiene informaci√≥n detallada de un usuario espec√≠fico"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üì§ Upload",
      "description": "Endpoints para subir archivos",
      "item": [
        {
          "name": "üì∑ Subir imagen",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "description": "Archivo de imagen a subir"
                },
                {
                  "key": "folder",
                  "value": "murales",
                  "type": "text",
                  "description": "Carpeta de destino en Cloudinary"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/api/upload",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "upload"
              ]
            },
            "description": "Sube una imagen a Cloudinary y retorna la URL p√∫blica"
          },
          "response": []
        }
      ]
    },
    {
      "name": "üß™ Testing & Utilities",
      "description": "Endpoints para testing y utilidades",
      "item": [
        {
          "name": "üè• Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/health",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "health"
              ]
            },
            "description": "Verifica que el servidor est√© funcionando correctamente"
          },
          "response": []
        },
        {
          "name": "üìä Estad√≠sticas generales",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/stats",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "stats"
              ]
            },
            "description": "Obtiene estad√≠sticas generales del museo (total de murales, salas, usuarios, etc.)"
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Script global que se ejecuta antes de cada request",
          "console.log('üöÄ Ejecutando request a:', pm.request.url.toString());",
          "",
          "// Agregar timestamp para debugging",
          "pm.environment.set('timestamp', new Date().toISOString());"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Script global que se ejecuta despu√©s de cada response",
          "console.log('‚úÖ Response recibida en:', pm.environment.get('timestamp'));",
          "console.log('üìä Status:', pm.response.status, pm.response.code);",
          "",
          "// Log de errores si el status no es exitoso",
          "if (pm.response.code >= 400) {",
          "    console.error('‚ùå Error detectado:', pm.response.text());",
          "}"
        ]
      }
    }
  ]
}
